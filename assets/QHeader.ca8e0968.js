import{v as $,x as W,y as z,z as _,A as l,B as u,C as E,D as V,E as I,G as F,r as h,H as K,I as x,w as p,J as U,K as M,L as N,M as j}from"./index.a99d2ae6.js";import{Q as A,a as T}from"./QResizeObserver.a824e144.js";import{g as B}from"./use-timeout.b976cfb9.js";var k=$({name:"QPageContainer",setup(e,{slots:m}){const{proxy:{$q:c}}=F(),o=W(V,z);if(o===z)return console.error("QPageContainer needs to be child of QLayout"),z;_(I,!0);const n=l(()=>{const r={};return o.header.space===!0&&(r.paddingTop=`${o.header.size}px`),o.right.space===!0&&(r[`padding${c.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(r.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(r[`padding${c.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),r});return()=>u("div",{class:"q-page-container",style:n.value},E(m.default))}}),X=$({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:m,emit:c}){const{proxy:{$q:o}}=F(),n=h(null),r=h(o.screen.height),d=h(e.container===!0?0:o.screen.width),w=h({position:0,direction:"down",inflectionPoint:0}),g=h(0),s=h(K.value===!0?0:B()),L=l(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),Q=l(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),C=l(()=>s.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),f=l(()=>s.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function y(a){if(e.container===!0||document.qScrollPrevented!==!0){const i={position:a.position.top,direction:a.direction,directionChanged:a.directionChanged,inflectionPoint:a.inflectionPoint.top,delta:a.delta.top};w.value=i,e.onScroll!==void 0&&c("scroll",i)}}function H(a){const{height:i,width:b}=a;let q=!1;r.value!==i&&(q=!0,r.value=i,e.onScrollHeight!==void 0&&c("scrollHeight",i),S()),d.value!==b&&(q=!0,d.value=b),q===!0&&e.onResize!==void 0&&c("resize",a)}function R({height:a}){g.value!==a&&(g.value=a,S())}function S(){if(e.container===!0){const a=r.value>g.value?B():0;s.value!==a&&(s.value=a)}}let t=null;const v={instances:{},view:l(()=>e.view),isContainer:l(()=>e.container),rootRef:n,height:r,containerHeight:g,scrollbarWidth:s,totalWidth:l(()=>d.value+s.value),rows:l(()=>{const a=e.view.toLowerCase().split(" ");return{top:a[0].split(""),middle:a[1].split(""),bottom:a[2].split("")}}),header:x({size:0,offset:0,space:!1}),right:x({size:300,offset:0,space:!1}),footer:x({size:0,offset:0,space:!1}),left:x({size:300,offset:0,space:!1}),scroll:w,animate(){t!==null?clearTimeout(t):document.body.classList.add("q-body--layout-animate"),t=setTimeout(()=>{t=null,document.body.classList.remove("q-body--layout-animate")},155)},update(a,i,b){v[a][i]=b}};if(_(V,v),B()>0){let b=function(){a=null,i.classList.remove("hide-scrollbar")},q=function(){if(a===null){if(i.scrollHeight>o.screen.height)return;i.classList.add("hide-scrollbar")}else clearTimeout(a);a=setTimeout(b,300)},P=function(O){a!==null&&O==="remove"&&(clearTimeout(a),b()),window[`${O}EventListener`]("resize",q)},a=null;const i=document.body;p(()=>e.container!==!0?"add":"remove",P),e.container!==!0&&P("add"),U(()=>{P("remove")})}return()=>{const a=M(m.default,[u(A,{onScroll:y}),u(T,{onResize:H})]),i=u("div",{class:L.value,style:Q.value,ref:e.container===!0?void 0:n,tabindex:-1},a);return e.container===!0?u("div",{class:"q-layout-container overflow-hidden",ref:n},[u(T,{onResize:R}),u("div",{class:"absolute-full",style:C.value},[u("div",{class:"scroll",style:f.value},[i])])]):i}}}),Y=$({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:m}){const c=l(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>u("div",{class:c.value,role:"toolbar"},E(m.default))}}),Z=$({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:m,emit:c}){const{proxy:{$q:o}}=F(),n=W(V,z);if(n===z)return console.error("QHeader needs to be child of QLayout"),z;const r=h(parseInt(e.heightHint,10)),d=h(!0),w=l(()=>e.reveal===!0||n.view.value.indexOf("H")>-1||o.platform.is.ios&&n.isContainer.value===!0),g=l(()=>{if(e.modelValue!==!0)return 0;if(w.value===!0)return d.value===!0?r.value:0;const t=r.value-n.scroll.value.position;return t>0?t:0}),s=l(()=>e.modelValue!==!0||w.value===!0&&d.value!==!0),L=l(()=>e.modelValue===!0&&s.value===!0&&e.reveal===!0),Q=l(()=>"q-header q-layout__section--marginal "+(w.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),C=l(()=>{const t=n.rows.value.top,v={};return t[0]==="l"&&n.left.space===!0&&(v[o.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),t[2]==="r"&&n.right.space===!0&&(v[o.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),v});function f(t,v){n.update("header",t,v)}function y(t,v){t.value!==v&&(t.value=v)}function H({height:t}){y(r,t),f("size",t)}function R(t){L.value===!0&&y(d,!0),c("focusin",t)}p(()=>e.modelValue,t=>{f("space",t),y(d,!0),n.animate()}),p(g,t=>{f("offset",t)}),p(()=>e.reveal,t=>{t===!1&&y(d,e.modelValue)}),p(d,t=>{n.animate(),c("reveal",t)}),p(n.scroll,t=>{e.reveal===!0&&y(d,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const S={};return n.instances.header=S,e.modelValue===!0&&f("size",r.value),f("space",e.modelValue),f("offset",g.value),N(()=>{n.instances.header===S&&(n.instances.header=void 0,f("size",0),f("offset",0),f("space",!1))}),()=>{const t=j(m.default,[]);return e.elevated===!0&&t.push(u("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(u(T,{debounce:0,onResize:H})),u("header",{class:Q.value,style:C.value,onFocusin:R},t)}}});export{Y as Q,Z as a,X as b,k as c};
