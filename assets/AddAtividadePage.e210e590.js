import{u as te,a as ie,c as se,e as ae,b as le,f as Y,Q as R}from"./QInput.0da39cad.js";import{h as oe,a as ne,Q as k}from"./QSelect.9b4bcfab.js";import{u as re,a as ue}from"./use-form.49964318.js";import{r as M,A as _,G as J,a6 as de,$ as H,a5 as ce,B as S,v as me,Y as pe,a1 as fe,x as ve,aE as _e,_ as he,b as ge,o as L,i as G,g as a,c as be,k as ye,f as p,e as xe,F as Ve,l as Fe,m as X,q as Ce,s as Se,j}from"./index.a99d2ae6.js";import{Q as ke}from"./QImg.a0d0aa40.js";import{Q as Ae}from"./QForm.f70bc68e.js";import{P as we}from"./ProfileComponent.1b8cd582.js";import"./use-dark.7d681600.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./selection.d77f1360.js";import"./QDialog.832befdd.js";import"./use-timeout.b976cfb9.js";import"./rtl.b51694b1.js";function A(e,i,g,c){const t=[];return e.forEach(r=>{c(r)===!0?t.push(r):i.push({failedPropValidation:g,file:r})}),t}function E(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),H(e)}const Ne={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},je=["rejected"];function Pe({editable:e,dnd:i,getFileInput:g,addFilesToQueue:c}){const{props:t,emit:r,proxy:f}=J(),n=M(null),b=_(()=>t.accept!==void 0?t.accept.split(",").map(s=>(s=s.trim(),s==="*"?"*/":(s.endsWith("/*")&&(s=s.slice(0,s.length-1)),s.toUpperCase()))):null),F=_(()=>parseInt(t.maxFiles,10)),P=_(()=>parseInt(t.maxTotalSize,10));function z(s){if(e.value)if(s!==Object(s)&&(s={target:null}),s.target!==null&&s.target.matches('input[type="file"]')===!0)s.clientX===0&&s.clientY===0&&de(s);else{const y=g();y&&y!==s.target&&y.click(s)}}function I(s){e.value&&s&&c(null,s)}function U(s,y,w,N){let o=Array.from(y||s.target.files);const h=[],C=()=>{h.length!==0&&r("rejected",h)};if(t.accept!==void 0&&b.value.indexOf("*/")===-1&&(o=A(o,h,"accept",u=>b.value.some(m=>u.type.toUpperCase().startsWith(m)||u.name.toUpperCase().endsWith(m))),o.length===0))return C();if(t.maxFileSize!==void 0){const u=parseInt(t.maxFileSize,10);if(o=A(o,h,"max-file-size",m=>m.size<=u),o.length===0)return C()}if(t.multiple!==!0&&o.length!==0&&(o=[o[0]]),o.forEach(u=>{u.__key=u.webkitRelativePath+u.lastModified+u.name+u.size}),N===!0){const u=w.map(m=>m.__key);o=A(o,h,"duplicate",m=>u.includes(m.__key)===!1)}if(o.length===0)return C();if(t.maxTotalSize!==void 0){let u=N===!0?w.reduce((m,B)=>m+B.size,0):0;if(o=A(o,h,"max-total-size",m=>(u+=m.size,u<=P.value)),o.length===0)return C()}if(typeof t.filter=="function"){const u=t.filter(o);o=A(o,h,"filter",m=>u.includes(m))}if(t.maxFiles!==void 0){let u=N===!0?w.length:0;if(o=A(o,h,"max-files",()=>(u++,u<=F.value)),o.length===0)return C()}if(C(),o.length!==0)return o}function D(s){E(s),i.value!==!0&&(i.value=!0)}function d(s){H(s),(s.relatedTarget!==null||ce.is.safari!==!0?s.relatedTarget!==n.value:document.elementsFromPoint(s.clientX,s.clientY).includes(n.value)===!1)===!0&&(i.value=!1)}function T(s){E(s);const y=s.dataTransfer.files;y.length!==0&&c(null,y),i.value=!1}function O(s){if(i.value===!0)return S("div",{ref:n,class:`q-${s}__dnd absolute-full`,onDragenter:E,onDragover:E,onDragleave:d,onDrop:T})}return Object.assign(f,{pickFiles:z,addFiles:I}),{pickFiles:z,addFiles:I,onDragover:D,onDragleave:d,processFiles:U,getDndNode:O,maxFilesNumber:F,maxTotalSizeNumber:P}}var ze=me({name:"QFile",inheritAttrs:!1,props:{...te,...re,...Ne,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ie,...je],setup(e,{slots:i,emit:g,attrs:c}){const{proxy:t}=J(),r=se(),f=M(null),n=M(!1),b=ue(e),{pickFiles:F,onDragover:P,onDragleave:z,processFiles:I,getDndNode:U}=Pe({editable:r.editable,dnd:n,getFileInput:K,addFilesToQueue:W}),D=ae(e),d=_(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),T=_(()=>Y(d.value)),O=_(()=>d.value.map(l=>l.name).join(", ")),s=_(()=>oe(d.value.reduce((l,v)=>l+v.size,0))),y=_(()=>({totalSize:s.value,filesNumber:d.value.length,maxFiles:e.maxFiles})),w=_(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:b.value,...c,id:r.targetUid.value,disabled:r.editable.value!==!0})),N=_(()=>"q-file q-field--auto-height"+(n.value===!0?" q-file--dnd":"")),o=_(()=>e.multiple===!0&&e.append===!0);function h(l){const v=d.value.slice();v.splice(l,1),u(v)}function C(l){const v=d.value.indexOf(l);v>-1&&h(v)}function u(l){g("update:modelValue",e.multiple===!0?l:l[0])}function m(l){l.keyCode===13&&fe(l)}function B(l){(l.keyCode===13||l.keyCode===32)&&F(l)}function K(){return f.value}function W(l,v){const V=I(l,v,d.value,o.value),Q=K();Q!=null&&(Q.value=""),V!==void 0&&((e.multiple===!0?e.modelValue&&V.every(ee=>d.value.includes(ee)):e.modelValue===V[0])||u(o.value===!0?d.value.concat(V):V))}function q(){return[S("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function Z(){if(i.file!==void 0)return d.value.length===0?q():d.value.map((v,V)=>i.file({index:V,file:v,ref:this}));if(i.selected!==void 0)return d.value.length===0?q():i.selected({files:d.value,ref:this});if(e.useChips===!0)return d.value.length===0?q():d.value.map((v,V)=>S(ne,{key:"file-"+V,removable:r.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{h(V)}},()=>S("span",{class:"ellipsis",textContent:v.name})));const l=e.displayValue!==void 0?e.displayValue:O.value;return l.length!==0?[S("div",{class:e.inputClass,style:e.inputStyle,textContent:l})]:q()}function $(){const l={ref:f,...w.value,...D.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:W};return e.multiple===!0&&(l.multiple=!0),S("input",l)}return Object.assign(r,{fieldClass:N,emitValue:u,hasValue:T,inputRef:f,innerValue:d,floatingLabel:_(()=>T.value===!0||Y(e.displayValue)),computedCounter:_(()=>{if(e.counterLabel!==void 0)return e.counterLabel(y.value);const l=e.maxFiles;return`${d.value.length}${l!==void 0?" / "+l:""} (${s.value})`}),getControlChild:()=>U("file"),getControl:()=>{const l={ref:r.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return r.editable.value===!0&&Object.assign(l,{onDragover:P,onDragleave:z,onKeydown:m,onKeyup:B}),S("div",l,[$()].concat(Z()))}}),Object.assign(t,{removeAtIndex:h,removeFile:C,getNativeElement:()=>f.value}),pe(t,"nativeEl",()=>f.value),le(r)}});function Ie(){return ve(_e)}const Te={name:"AddAtividadePage",data(){return{$q:Ie(),titulo_atividade:null,nivel_suporte:null,nivel_atividade:null,area_bncc:null,faixa_etaria:null,recursos:null,visuais:null,descricao:null,valor:null,medias:[null,null,null,null],medias_paths:[null,null,null,null],ops_nivel_suporte:[{id:1,desc:"N\xEDvel 1"},{id:2,desc:"N\xEDvel 2"},{id:3,desc:"N\xEDvel 3"}],ops_nivel_atividade:[{id:1,desc:"F\xE1cil"},{id:2,desc:"M\xE9dio"},{id:3,desc:"Avan\xE7ado"}],ops_areas:[{id:1,desc:"O Eu, o outro e o n\xF3s"},{id:2,desc:"Corpo, gestos e movimentos"},{id:3,desc:"Tra\xE7os, sons, cores e formas"},{id:4,desc:"Escuta, fala, pensamentos e imagina\xE7\xE3o"},{id:5,desc:"Espa\xE7os, tempos, quantidades, rela\xE7\xF5es e transforma\xE7\xF5es"}],ops_faixa_etaria:[{id:1,desc:"0 a 1 ano e 6 meses"},{id:2,desc:"1 ano e 7 meses a 3 anos e 11 meses"},{id:3,desc:"4 anos a 5 anos e 11 meses"},{id:4,desc:"6 anos a 11 anos"}],ops_recursos:[{id:!0,desc:"Com"},{id:!1,desc:"Sem"}],ops_visuais:[{id:!0,desc:"Com"},{id:!1,desc:"Sem"}],perfil:null,purchased_activities:null}},async mounted(){try{await this.getPerfilCliente()}catch(e){console.error(e)}},methods:{async getToken(){return localStorage.getItem("token")},async onSubmit(){const e=this.getToken(),i="/api/activity/store",g={"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e}`};let c={title:this.titulo_atividade,description:this.descricao,age_group_id:this.faixa_etaria.id,area_id:this.area_bncc.id,level_id:this.nivel_suporte.id,has_multimedia_resources:this.recursos.id,has_visual_instructions:this.visuais.id,price:this.valor};this.medias_paths[0]!==null&&(c.media_path_1=this.medias_paths[0]),this.medias_paths[1]!==null&&(c.media_path_2=this.medias_paths[1]),this.medias_paths[2]!==null&&(c.media_path_3=this.medias_paths[2]),this.medias_paths[3]!==null&&(c.media_path_4=this.medias_paths[3]);let t=await fetch(i,{method:"POST",headers:g,body:JSON.stringify(c)}).then(r=>{let f="";if(r.ok)f="Atividade anexada com sucesso!";else throw f="N\xE3o foi poss\xEDvel anexar a atividade",console.log(r.json()),new Error("Erro na resposta da API");return this.$q.notify(f),r.json()}).then(r=>{console.log(r)}).catch(r=>{console.error("Erro na solicita\xE7\xE3o \xE0 API:",r)});console.log(c),console.log(t)},updateFile(e){console.log("handleUpload is triggered"),this.medias[e]?this.medias_paths[e]=URL.createObjectURL(this.medias[e]):this.medias_paths[e]=null,console.log(this.medias[e]),console.log(this.medias_paths[e])},escolherArquivo(e){const i=document.querySelectorAll('input[type="file"]')[e];i&&i.click()},async getPerfilCliente(){try{const e=await this.getToken(),i={"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e}`},g=await fetch("/api/profile",{method:"GET",headers:i});if(!g.ok)throw new Error("Network response was not ok");const c=await g.json();console.log("perfil",c),this.perfil=c.user,this.purchased_activities=c.purchased_activities,console.log(this.purchased_activities)}catch(e){console.error(e)}}},components:{ProfileComponent:we}},x=e=>(Ce("data-v-6da9b1a5"),e=e(),Se(),e),qe={class:"page-container row"},Ee={class:"col-3"},Ue={class:"add-atividade col-9"},De=x(()=>a("h5",{style:{"margin-bottom":"16px"}},"Adicionando atividade",-1)),Oe={class:"form",style:{padding:"16px 0px"}},Be={class:"field"},Qe=x(()=>a("label",{for:"titulo"},"T\xEDtulo da atividade",-1)),Re={class:"row"},Le={class:"field col-6"},Me=x(()=>a("label",{for:"nivel-suporte"},"N\xEDvel de suporte de TEA",-1)),Ke={class:"field col-6"},We=x(()=>a("label",{for:"nivel-atividade"},"N\xEDvel da atividade",-1)),Ye={class:"row"},Ge={class:"field col-6"},Xe=x(()=>a("label",{for:"area"},[j("\xC1rea do conhecimento"),a("span",{class:"small-txt"}," (de acordo com a BNCC)")],-1)),Je={class:"field col-6"},He=x(()=>a("label",{for:"faixa-etaria"},"Faixa et\xE1ria",-1)),Ze={class:"row"},$e={class:"field col-6"},et=x(()=>a("label",{for:"recursos"},[j("Recursos multim\xEDdias "),a("span",{class:"small-txt"},"(Sons, tablets, Tvs, etc)")],-1)),tt={class:"field col-6"},it=x(()=>a("label",{for:"visuais"},[j("Instru\xE7\xF5es visuais "),a("span",{class:"small-txt"},"(Manuais, mapas, ilustra\xE7\xF5es, etc)")],-1)),st={class:"field"},at=x(()=>a("label",{for:"descricao"},[j("Descri\xE7\xE3o da atividade "),a("span",{class:"small-txt"},"(como ser\xE1 executada)")],-1)),lt={class:"field"},ot=x(()=>a("label",{for:"valor"},[j("Valor da atividade "),a("span",{class:"small-txt"},"(Deve ser de R$ 0 a 100*)")],-1)),nt={class:"field",style:{"margin-top":"16px"}},rt=x(()=>a("label",{for:"multimidia",style:{"font-weight":"400"}},"Arquivos multim\xEDdias (at\xE9 4 m\xEDdias)",-1)),ut={class:"files row"},dt={class:"buttons"};function ct(e,i,g,c,t,r){const f=ge("ProfileComponent");return L(),G("div",qe,[a("div",Ee,[t.perfil?(L(),be(f,{key:0,showBtn:!1,user:t.perfil,style:{"max-width":"15vw"}},null,8,["user"])):ye("",!0)]),a("div",Ue,[De,a("div",Oe,[p(Ae,{class:"fields",onSubmit:i[9]||(i[9]=n=>r.onSubmit())},{default:xe(()=>[a("div",Be,[Qe,p(R,{outlined:"",dense:"",name:"titulo",modelValue:t.titulo_atividade,"onUpdate:modelValue":i[0]||(i[0]=n=>t.titulo_atividade=n)},null,8,["modelValue"])]),a("div",Re,[a("div",Le,[Me,p(k,{outlined:"",dense:"",name:"nivel-suporte",modelValue:t.nivel_suporte,"onUpdate:modelValue":i[1]||(i[1]=n=>t.nivel_suporte=n),options:t.ops_nivel_suporte,"option-value":"id","option-label":"desc"},null,8,["modelValue","options"])]),a("div",Ke,[We,p(k,{outlined:"",dense:"",name:"nivel-atividade",modelValue:t.nivel_atividade,"onUpdate:modelValue":i[2]||(i[2]=n=>t.nivel_atividade=n),options:t.ops_nivel_atividade,"option-value":"id","option-label":"desc"},null,8,["modelValue","options"])])]),a("div",Ye,[a("div",Ge,[Xe,p(k,{outlined:"",dense:"",name:"area",modelValue:t.area_bncc,"onUpdate:modelValue":i[3]||(i[3]=n=>t.area_bncc=n),options:t.ops_areas,"option-value":"id","option-label":"desc"},null,8,["modelValue","options"])]),a("div",Je,[He,p(k,{outlined:"",dense:"",name:"faixa-etaria",modelValue:t.faixa_etaria,"onUpdate:modelValue":i[4]||(i[4]=n=>t.faixa_etaria=n),options:t.ops_faixa_etaria,"option-value":"id","option-label":"desc"},null,8,["modelValue","options"])])]),a("div",Ze,[a("div",$e,[et,p(k,{outlined:"",dense:"",name:"recursos",modelValue:t.recursos,"onUpdate:modelValue":i[5]||(i[5]=n=>t.recursos=n),options:t.ops_recursos,"option-value":"id","option-label":"desc"},null,8,["modelValue","options"])]),a("div",tt,[it,p(k,{outlined:"",dense:"",name:"visuais",modelValue:t.visuais,"onUpdate:modelValue":i[6]||(i[6]=n=>t.visuais=n),options:t.ops_visuais,"option-value":"id","option-label":"desc"},null,8,["modelValue","options"])])]),a("div",st,[at,p(R,{outlined:"",type:"textarea",counter:"",modelValue:t.descricao,"onUpdate:modelValue":i[7]||(i[7]=n=>t.descricao=n),name:"descricao",autogrow:""},null,8,["modelValue"])]),a("div",lt,[ot,p(R,{outlined:"",type:"number",modelValue:t.valor,"onUpdate:modelValue":i[8]||(i[8]=n=>t.valor=n),name:"valor",prefix:"R$",dense:"",hint:"*para valores maiores que R$ 100, a atividade seguir\xE1 para avalia\xE7\xE3o da nossa equipe. "},null,8,["modelValue"])]),a("div",nt,[rt,a("div",ut,[(L(),G(Ve,null,Fe(4,(n,b)=>a("div",{class:"file cursor-pointer col",key:b},[p(ze,{modelValue:t.medias[b],"onUpdate:modelValue":[F=>t.medias[b]=F,F=>r.updateFile(b)],borderless:"",clearable:"","clear-icon":"close",ref_for:!0,ref:"qfile"},null,8,["modelValue","onUpdate:modelValue"]),p(ke,{src:t.medias_paths[b],ratio:"1","placeholder-src":"public/icons/add-circle-outline.svg",onClick:F=>this.$refs.qfile[b].pickFiles()},null,8,["src","onClick"])])),64))])]),a("div",dt,[p(X,{label:"Cancelar","no-caps":"",rounded:"",unelevated:"",outline:"","text-color":"primary"}),p(X,{label:"Adicionar","no-caps":"",color:"primary",rounded:"",unelevated:"",type:"submit"})])]),_:1})])])])}var kt=he(Te,[["render",ct],["__scopeId","data-v-6da9b1a5"]]);export{kt as default};
